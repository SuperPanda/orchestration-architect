# file: roles/nspawn/tasks/main.yml
# ========================================================
# AUTO-GENERATED FILE - DO NOT EDIT!
# This file is generated by an automated system.
# Any manual changes may be overwritten.
# ========================================================
# role: nspawn
# version: 0.8.1
---


# BEGIN ORCHESTRATION ARCHITECT MANAGED BLOCK 30_managed_block_before_content
# END ORCHESTRATION ARCHITECT MANAGED BLOCK 30_managed_block_before_content


# BEGIN ORCHESTRATION ARCHITECT MANAGED BLOCK 50_content_region_message
# END ORCHESTRATION ARCHITECT MANAGED BLOCK 50_content_region_message

- name: Display supplied arguments to nspawn when verbosity is set
  when: (ansible_verbosity | int)  > 1
  ansible.builtin.debug:
    msg: |
      nspawn: {{ nspawn | default('not set') }}
      nspawn_state: {{ nspawn_state | default('not set') }}
      nspawn_machine_name: {{ nspawn_machine_name | default('not set') }}
      nspawn_target: {{ nspawn_target | default('not set') }}
      nspawn_command_template: {{ nspawn_command_template | default('not set') }}
      nspawn_overlays: {{ nspawn_overlays | default('not set') }}
      nspawn_extras: {{ nspawn_extras | default('not set') }}
      
- debug:
    msg: |
      nspawn_params:
        state: "{{ (nspawn | default({})).state is defined | ternary(nspawn.state, nspawn_state | default(omit, true)) }}"
        machine_name: "{{ (nspawn | default({})).machine_name is defined | ternary(nspawn.machine_name, nspawn_machine_name | default(omit, true)) }}"
        target: "{{ (nspawn | default({})).target is defined | ternary(nspawn.target, nspawn_target | default(omit, true)) }}"
        command_template: "{{ (nspawn | default({})).command_template is defined | ternary(nspawn.command_template, nspawn_command_template | default(omit, true)) }}"
        overlays: "{{ (nspawn | default({})).overlays is defined | ternary(nspawn.overlays, nspawn_overlays | default(omit, true)) }}"
        extras: "{{ (nspawn | default({})).extras is defined | ternary(nspawn.extras, nspawn_extras | default(omit, true)) }}"
        
- name: Pass configuration parameters to the nspawn role
  vars:
    nspawn_params:
      state: "{{ (nspawn | default({})).state is defined | ternary(nspawn.state, nspawn_state | default(omit, true)) }}"
      machine_name: "{{ (nspawn | default({})).machine_name is defined | ternary(nspawn.machine_name, nspawn_machine_name | default(omit, true)) }}"
      target: "{{ (nspawn | default({})).target is defined | ternary(nspawn.target, nspawn_target | default(omit, true)) }}"
      command_template: "{{ (nspawn | default({})).command_template is defined | ternary(nspawn.command_template, nspawn_command_template | default(omit, true)) }}"
      overlays: "{{ (nspawn | default({})).overlays is defined | ternary(nspawn.overlays, nspawn_overlays | default(omit, true)) }}"
      extras: "{{ (nspawn | default({})).extras is defined | ternary(nspawn.extras, nspawn_extras | default(omit, true)) }}"
      
  ansible.builtin.include_tasks:
    file: "{{ (nspawn_params.state==omit) | ternary('info', nspawn_params.state) }}.yml"


# BEGIN ORCHESTRATION ARCHITECT MANAGED BLOCK 90_managed_block_after_content
# END ORCHESTRATION ARCHITECT MANAGED BLOCK 90_managed_block_after_content
