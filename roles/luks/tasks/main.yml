# file: roles/luks/tasks/main.yml
# ========================================================
# AUTO-GENERATED FILE - DO NOT EDIT!
# This file is generated by an automated system.
# Any manual changes may be overwritten.
# ========================================================
# role: luks
# version: 0.8.1
---


# BEGIN ORCHESTRATION ARCHITECT MANAGED BLOCK 30_managed_block_before_content
# END ORCHESTRATION ARCHITECT MANAGED BLOCK 30_managed_block_before_content


# BEGIN ORCHESTRATION ARCHITECT MANAGED BLOCK 50_content_region_message
# END ORCHESTRATION ARCHITECT MANAGED BLOCK 50_content_region_message

- name: Display supplied arguments to luks when verbosity is set
  when: (ansible_verbosity | int)  > 1
  ansible.builtin.debug:
    msg: |
      luks: {{ luks | default('not set') }}
      luks_state: {{ luks_state | default('not set') }}
      luks_name: {{ luks_name | default('not set') }}
      luks_path: {{ luks_path | default('not set') }}
      luks_label: {{ luks_label | default('not set') }}
      luks_keyfile: {{ luks_keyfile | default('not set') }}
      luks_new_keyfile: {{ luks_new_keyfile | default('not set') }}
      luks_passphrase: {{ luks_passphrase | default('not set') }}
      luks_new_passphrase: {{ luks_new_passphrase | default('not set') }}
      luks_mapped_name: {{ luks_mapped_name | default('not set') }}
      luks_uuid: {{ luks_uuid | default('not set') }}
      
- debug:
    msg: |
      luks_params:
        state: "{{ (luks | default({})).state is defined | ternary(luks.state, luks_state | default(omit, true)) }}"
        name: "{{ (luks | default({})).name is defined | ternary(luks.name, luks_name | default(omit, true)) }}"
        path: "{{ (luks | default({})).path is defined | ternary(luks.path, luks_path | default(omit, true)) }}"
        label: "{{ (luks | default({})).label is defined | ternary(luks.label, luks_label | default(omit, true)) }}"
        keyfile: "{{ (luks | default({})).keyfile is defined | ternary(luks.keyfile, luks_keyfile | default(omit, true)) }}"
        new_keyfile: "{{ (luks | default({})).new_keyfile is defined | ternary(luks.new_keyfile, luks_new_keyfile | default(omit, true)) }}"
        passphrase: "{{ (luks | default({})).passphrase is defined | ternary(luks.passphrase, luks_passphrase | default(omit, true)) }}"
        new_passphrase: "{{ (luks | default({})).new_passphrase is defined | ternary(luks.new_passphrase, luks_new_passphrase | default(omit, true)) }}"
        mapped_name: "{{ (luks | default({})).mapped_name is defined | ternary(luks.mapped_name, luks_mapped_name | default(omit, true)) }}"
        uuid: "{{ (luks | default({})).uuid is defined | ternary(luks.uuid, luks_uuid | default(omit, true)) }}"
        
- name: Pass configuration parameters to the luks role
  vars:
    luks_params:
      state: "{{ (luks | default({})).state is defined | ternary(luks.state, luks_state | default(omit, true)) }}"
      name: "{{ (luks | default({})).name is defined | ternary(luks.name, luks_name | default(omit, true)) }}"
      path: "{{ (luks | default({})).path is defined | ternary(luks.path, luks_path | default(omit, true)) }}"
      label: "{{ (luks | default({})).label is defined | ternary(luks.label, luks_label | default(omit, true)) }}"
      keyfile: "{{ (luks | default({})).keyfile is defined | ternary(luks.keyfile, luks_keyfile | default(omit, true)) }}"
      new_keyfile: "{{ (luks | default({})).new_keyfile is defined | ternary(luks.new_keyfile, luks_new_keyfile | default(omit, true)) }}"
      passphrase: "{{ (luks | default({})).passphrase is defined | ternary(luks.passphrase, luks_passphrase | default(omit, true)) }}"
      new_passphrase: "{{ (luks | default({})).new_passphrase is defined | ternary(luks.new_passphrase, luks_new_passphrase | default(omit, true)) }}"
      mapped_name: "{{ (luks | default({})).mapped_name is defined | ternary(luks.mapped_name, luks_mapped_name | default(omit, true)) }}"
      uuid: "{{ (luks | default({})).uuid is defined | ternary(luks.uuid, luks_uuid | default(omit, true)) }}"
      
  ansible.builtin.include_tasks:
    file: "{{ (luks_params.state==omit) | ternary('info', luks_params.state) }}.yml"


# BEGIN ORCHESTRATION ARCHITECT MANAGED BLOCK 90_managed_block_after_content
# END ORCHESTRATION ARCHITECT MANAGED BLOCK 90_managed_block_after_content
