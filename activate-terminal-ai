#!/bin/bash
# File: ./scripts/activate-orchestration-architect
ORCHESTRATION_ARCHITECT_HOME="$HOME/orchestration_architect"
OPENAI_ENV_FILE_PATH="$HOME/keystore/api-keys/openai"

# Check if OPENAI_ENV_FILE_PATH exists
if [ ! -f "$OPENAI_ENV_FILE_PATH" ]; then
    echo "Error: OPENAI_ENV_FILE_PATH ('$OPENAI_ENV_FILE_PATH') does not exist."
    echo "Please add OPENAI_API_KEY and OPENAI_PROJECT_ID to the file."
    echo "Example:"
    echo "export OPENAI_API_KEY=\"your_api_key_here\""
    echo "export OPENAI_PROJECT_ID=\"your_project_id_here\""
    exit 1
fi

# Load environment variables
source "$OPENAI_ENV_FILE_PATH"

# Add orchestration architect scripts to PATH
export PATH="$ORCHESTRATION_ARCHITECT_HOME/scripts:$PATH"

# Function to update PS1
update_ps1() {
    PS1="[OrchestrationArchitect] $PS1"
}

# Call the function to update PS1
update_ps1

# Export the function
export -f update_ps1

# Execute shell with environment variables
exec "$SHELL" -l
